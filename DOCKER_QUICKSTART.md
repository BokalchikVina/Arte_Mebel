# üê≥ Docker - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

## ‚ö° –ó–∞–ø—É—Å–∫ –∑–∞ 2 –∫–æ–º–∞–Ω–¥—ã

### –°–ø–æ—Å–æ–± 1: –°–∫—Ä–∏–ø—Ç (—Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π)

```bash
./docker-start.sh
```

–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º –∏ –≥–æ—Ç–æ–≤–æ! üéâ

### –°–ø–æ—Å–æ–± 2: Docker Compose

```bash
# Development (—Å hot reload)
docker-compose up dev

# Production (–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
docker-compose up prod
```

–û—Ç–∫—Ä–æ–π—Ç–µ: **http://localhost:3000** üöÄ

---

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker:

**Windows/Mac:**
- –°–∫–∞—á–∞–π—Ç–µ [Docker Desktop](https://www.docker.com/products/docker-desktop/)
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ

**Linux:**
```bash
# Ubuntu/Debian
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ Docker
sudo systemctl start docker
sudo systemctl enable docker
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
docker --version
docker-compose --version
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –≤–µ—Ä—Å–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `Docker version 24.0.0`)

---

## üöÄ –†–µ–∂–∏–º—ã –∑–∞–ø—É—Å–∫–∞

### Development —Ä–µ–∂–∏–º

**–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å hot reload:**

```bash
docker-compose up dev
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ Hot reload –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤
- ‚úÖ Source maps –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π —Ä–µ—Å—Ç–∞—Ä—Ç
- ‚ö†Ô∏è –ë–æ–ª—å—à–∏–π —Ä–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞ (~500 MB)

**–û—Å—Ç–∞–Ω–æ–≤–∫–∞:** `Ctrl+C` –∏–ª–∏ `docker-compose down`

### Production —Ä–µ–∂–∏–º

**–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞:**

```bash
docker-compose up prod
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä (~150 MB)
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è production
- ‚úÖ Multi-stage build
- ‚úÖ Non-root user (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)

---

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–µ
docker-compose up -d dev

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f dev

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞
docker-compose up --build dev

# –í–æ–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose exec dev sh

# –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
docker-compose exec dev npm run lint
```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä:
```bash
cp .env.docker .env.local
```

2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env.local`:
```env
NEXT_PUBLIC_YANDEX_METRIKA_ID=–≤–∞—à-id
NEXT_PUBLIC_PHONE=+79991234567
NEXT_PUBLIC_EMAIL=info@your-site.ru
```

3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
```bash
docker-compose down
docker-compose up dev
```

### –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç

–í `docker-compose.yml`:
```yaml
ports:
  - "8080:3000"  # –¢–µ–ø–µ—Ä—å localhost:8080
```

---

## ‚ùì –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### –ü–æ—Ä—Ç 3000 –∑–∞–Ω—è—Ç?

```bash
# –ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ docker-compose.yml –Ω–∞ 3001
ports:
  - "3001:3000"
```

### Docker –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è?

```bash
# Windows/Mac: –ó–∞–ø—É—Å—Ç–∏—Ç–µ Docker Desktop
# Linux: 
sudo systemctl start docker
```

### –ú–µ–¥–ª–µ–Ω–Ω–∞—è –ø–µ—Ä–≤–∞—è —Å–±–æ—Ä–∫–∞?

–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! Docker —Å–∫–∞—á–∏–≤–∞–µ—Ç –æ–±—Ä–∞–∑—ã –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.  
–ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—É—Å–∫–∏ –±—É–¥—É—Ç –±—ã—Å—Ç—Ä—ã–µ –±–ª–∞–≥–æ–¥–∞—Ä—è –∫—ç—à—É.

### Hot reload –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ volumes –≤ `docker-compose.yml`:
```yaml
volumes:
  - .:/app
```

### –ù—É–∂–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë?

```bash
# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
docker-compose down -v
docker system prune -a
```

---

## üìä –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏?

### Development –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:

1. –ë–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑: Node.js 18 Alpine (~180 MB)
2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
3. –ú–æ–Ω—Ç–∏—Ä—É–µ—Ç –≤–∞—à –∫–æ–¥ –∫–∞–∫ volume
4. –ó–∞–ø—É—Å–∫–∞–µ—Ç `npm run dev`
5. Hot reload —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ volumes

### Production –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:

1. **Stage 1:** –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
2. **Stage 2:** –°–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. **Stage 3:** –°–æ–∑–¥–∞—ë—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ (~150 MB)
4. –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ—Ç –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
5. –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä

---

## üåê –î–æ—Å—Ç—É–ø —Å –¥—Ä—É–≥–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω:

```
http://localhost:3000        # –ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ
http://–≤–∞—à-ip:3000          # –° –¥—Ä—É–≥–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤ —Å–µ—Ç–∏
```

**–£–∑–Ω–∞—Ç—å –≤–∞—à IP:**
```bash
# Windows
ipconfig

# Mac/Linux
ifconfig
# –∏–ª–∏
ip addr show
```

---

## üéâ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Docker

‚úÖ **–û–¥–∏–Ω–∞–∫–æ–≤–∞—è —Å—Ä–µ–¥–∞** - —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–µ–∑–¥–µ –æ–¥–∏–Ω–∞–∫–æ–≤–æ  
‚úÖ **–õ–µ–≥–∫–æ –¥–µ–ª–∏—Ç—å—Å—è** - –æ–¥–∏–Ω –æ–±—Ä–∞–∑ –¥–ª—è –≤—Å–µ—Ö  
‚úÖ **–ò–∑–æ–ª—è—Ü–∏—è** - –Ω–µ –∑–∞—Å–æ—Ä—è–µ—Ç –≤–∞—à—É —Å–∏—Å—Ç–µ–º—É  
‚úÖ **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç** - –æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞  
‚úÖ **Production ready** - –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é  

---

## üìö –î–∞–ª—å—à–µ

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: **[DOCKER.md](./DOCKER.md)**

- –í—Å–µ –∫–æ–º–∞–Ω–¥—ã Docker
- –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞
- CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- Best practices

---

**–ó–∞–ø—É—Å–∫–∞–π—Ç–µ –∏ —Ä–∞–±–æ—Ç–∞–π—Ç–µ!** üê≥üöÄ

```bash
docker-compose up dev
```
